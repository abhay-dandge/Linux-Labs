FROM ubuntu:24.04

# install deps
RUN apt update && apt install -y curl tar

# install Go (latest stable)
ENV GO_VERSION=1.23.2
RUN curl -LO https://go.dev/dl/go${GO_VERSION}.linux-amd64.tar.gz && \
    tar -C /usr/local -xzf go${GO_VERSION}.linux-amd64.tar.gz && \
    rm go${GO_VERSION}.linux-amd64.tar.gz
ENV PATH=$PATH:/usr/local/go/bin

# install gotty
RUN /usr/local/go/bin/go install github.com/sorenisanerd/gotty@latest
ENV PATH=$PATH:/root/go/bin

# expose port
EXPOSE 8080

# change this to what you want
ENV GOTTY_USERNAME=teacher
ENV GOTTY_PASSWORD=secret123

# run gotty with auth
CMD gotty --credential "$GOTTY_USERNAME:$GOTTY_PASSWORD" bash
FROM ubuntu:24.04

# install deps
RUN apt update && apt install -y curl tar

# install Go (latest stable)
ENV GO_VERSION=1.23.2
RUN curl -LO https://go.dev/dl/go${GO_VERSION}.linux-amd64.tar.gz && \
    tar -C /usr/local -xzf go${GO_VERSION}.linux-amd64.tar.gz && \
    rm go${GO_VERSION}.linux-amd64.tar.gz
ENV PATH=$PATH:/usr/local/go/bin

# install gotty
RUN /usr/local/go/bin/go install github.com/sorenisanerd/gotty@latest
ENV PATH=$PATH:/root/go/bin

# expose port
EXPOSE 8080

# change this to what you want
ENV GOTTY_USERNAME=teacher
ENV GOTTY_PASSWORD=secret123

# run gotty with auth
CMD gotty --permit-write --credential "$GOTTY_USERNAME:$GOTTY_PASSWORD" bash
